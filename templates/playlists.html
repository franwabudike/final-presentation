{% extends "base.html" %}

{% block content %}
<div class="playlists-content">
    <h1>Discover Playlists</h1>
    <p>Browse by mood or platform to find your perfect vibe.</p>

    <div class="filters">
        <div class="filter-group">
            <label for="mood">Filter by Mood</label>
            <select id="mood" onchange="applyFilters()">
                <option value="all" {% if mood == 'all' %}selected{% endif %}>All</option>
                <option value="chill" {% if mood == 'chill' %}selected{% endif %}>Chill</option>
                <option value="energized" {% if mood == 'energized' %}selected{% endif %}>Energized</option>
                <option value="focus" {% if mood == 'focus' %}selected{% endif %}>Focus</option>
                <option value="upbeat" {% if mood == 'upbeat' %}selected{% endif %}>Upbeat</option>
                <option value="lofi" {% if mood == 'lofi' %}selected{% endif %}>Lo-Fi</option>
                <option value="stressed" {% if mood == 'stressed' %}selected{% endif %}>Stressed</option>
                <option value="nature" {% if mood == 'nature' %}selected{% endif %}>Nature</option>
                <option value="jazz" {% if mood == 'jazz' %}selected{% endif %}>Jazz</option>
                <option value="classical" {% if mood == 'classical' %}selected{% endif %}>Classical</option>
                <option value="ambient" {% if mood == 'ambient' %}selected{% endif %}>Ambient</option>
            </select>
        </div>

        <div class="filter-group">
            <label for="platform">Filter by Platform</label>
            <select id="platform" onchange="applyFilters()">
                <option value="all" {% if platform == 'all' %}selected{% endif %}>All</option>
                <option value="youtube" {% if platform == 'youtube' %}selected{% endif %}>YouTube</option>
                <option value="spotify" {% if platform == 'spotify' %}selected{% endif %}>Spotify</option>
                <option value="soundcloud" {% if platform == 'soundcloud' %}selected{% endif %}>SoundCloud</option>
            </select>
        </div>
    </div>

    <div class="playlist-grid">
        {% for playlist in playlists %}
        <div class="playlist-card">
            <h3>{{ playlist.title }}</h3>
            <div class="meta">
                <span class="mood">{{ playlist.mood|capitalize }}</span>
                <span>{{ playlist.platform|capitalize }}</span>
            </div>
            <a href="{{ url_for('viberoom', playlist_id=loop.index0) }}" class="listen-now">Listen Now</a>
        </div>
        {% endfor %}
    </div>
</div>

<script>
function applyFilters() {
    const mood = document.getElementById('mood').value;
    const platform = document.getElementById('platform').value;
    window.location.href = `/playlists?mood=${mood}&platform=${platform}`;
}
</script>
{% endblock %}






