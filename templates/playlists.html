<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VibeRoom - All Playlists</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    /* Page scaffold alignment */
    main.playlists-content {
      max-width: 1100px;
      margin: 0 auto;
      padding: 2rem 1rem 4rem;
      text-align: center;
    }

    main.playlists-content h1 {
      margin: 0 0 .25rem;
      font-size: clamp(1.8rem, 2.5vw, 2.4rem);
    }

    main.playlists-content > p {
      margin: 0 0 1.5rem;
      color: #555;
    }

    /* Filters: centered row with wrap */
    .filters {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 1.25rem;
      flex-wrap: wrap;
      margin: 1.25rem auto 2rem;
    }

    .filter-group {
      display: grid;
      grid-template-rows: auto auto;
      gap: .4rem;
      text-align: left; /* label above control, still centered as a group */
    }

    .filter-group label {
      font-weight: 600;
      color: #333;
    }

    .filter-group select {
      min-width: 220px;
      padding: .6rem .8rem;
      border: 1px solid #d7d7e0;
      border-radius: 10px;
      background: #fff;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 1px 0 rgba(0,0,0,0.02);
    }

    /* Grid of playlists: centered, responsive */
    .playlist-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 1.25rem;
      margin: 0 auto 2.25rem;
      align-items: stretch;
    }

    .playlist-card {
      background: #fff;
      border: 1px solid #ececf3;
      border-radius: 14px;
      padding: 1rem 1rem 1.1rem;
      text-align: left;
      box-shadow: 0 6px 16px rgba(0,0,0,0.05);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .playlist-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.08);
    }

    .playlist-card h3 {
      margin: 0 0 .5rem;
      font-size: 1.05rem;
    }

    .playlist-card .meta {
      display: flex;
      align-items: center;
      gap: .5rem;
      margin-bottom: .85rem;
      font-size: .9rem;
      color: #666;
      flex-wrap: wrap;
    }

    .meta .mood {
      background: #f0f4ff;
      color: #2a3a8a;
      border: 1px solid #dfe8ff;
      padding: .2rem .55rem;
      border-radius: 999px;
      font-weight: 600;
      font-size: .8rem;
    }

    .listen-now {
      display: inline-block;
      margin-top: .2rem;
      padding: .55rem .9rem;
      border-radius: 10px;
      text-decoration: none;
      color: #fff;
      background: linear-gradient(135deg, #6a5acd, #7b68ee);
      font-weight: 700;
      text-align: center;
      transition: filter .12s ease, transform .06s ease;
    }
    .listen-now:hover { filter: brightness(1.05); transform: translateY(-1px); }

    /* Contribute section: centered, padded, clear inputs */
    .contribute-section {
      max-width: 720px;
      margin: 0 auto;
      background: #ffffff;
      border: 1px solid #ececf3;
      border-radius: 16px;
      padding: 1.6rem 1.2rem 1.2rem;
      box-shadow: 0 8px 22px rgba(0,0,0,0.06);
      text-align: center;
    }

    .contribute-section h2 {
      margin: 0 0 .35rem;
      font-size: clamp(1.3rem, 2vw, 1.6rem);
    }

    .contribute-section > p {
      margin: 0 0 1.2rem;
      color: #555;
    }

    .contribute-form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem 1rem;
      text-align: left;
    }

    @media (max-width: 640px) {
      .contribute-form { grid-template-columns: 1fr; }
    }

    .form-group {
      display: grid;
      gap: .45rem;
    }

    .form-group label {
      font-weight: 600;
      color: #333;
    }

    .form-group select,
    .form-group input[type="text"],
    .form-group input[type="url"] {
      width: 100%;
      padding: .7rem .85rem;
      border: 1px solid #d7d7e0;
      border-radius: 10px;
      background: #fafafa;
      transition: border-color .12s ease, background .12s ease, box-shadow .12s ease;
      font-size: .95rem;
    }

    .form-group select:focus,
    .form-group input:focus {
      outline: none;
      border-color: #7b68ee;
      background: #fff;
      box-shadow: 0 0 0 3px rgba(123,104,238,.15);
    }

    .add-playlist-btn {
      grid-column: 1 / -1;
      justify-self: center;
      padding: .75rem 1.25rem;
      border: 0;
      border-radius: 12px;
      background: linear-gradient(135deg, #6a5acd, #7b68ee);
      color: #fff;
      font-weight: 800;
      cursor: pointer;
      transition: filter .12s ease, transform .06s ease;
    }
    .add-playlist-btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
  </style>
</head>
<body>
  <div class="content-wrapper">
    {% include 'navbar.html' %}

    <main class="playlists-content main-content">
      <h1>All Playlists</h1>
      <p>Browse our complete collection of study-optimized playlists</p>

      <!-- Centered Filters -->
      <div class="filters">
        <div class="filter-group">
          <label for="mood-filter">Filter by Mood:</label>
          <select id="mood-filter">
            <option value="all" {% if mood == 'all' %}selected{% endif %}>All Moods</option>
            <option value="focus" {% if mood == 'focus' %}selected{% endif %}>Focus</option>
            <option value="chill" {% if mood == 'chill' %}selected{% endif %}>Chill</option>
            <option value="energized" {% if mood == 'energized' %}selected{% endif %}>Energized</option>
            <option value="upbeat" {% if mood == 'upbeat' %}selected{% endif %}>Upbeat</option>
            <option value="lofi" {% if mood == 'lofi' %}selected{% endif %}>Lo‑Fi</option>
            <option value="stressed" {% if mood == 'stressed' %}selected{% endif %}>Stress Relief</option>
            <option value="nature" {% if mood == 'nature' %}selected{% endif %}>Nature</option>
            <option value="jazz" {% if mood == 'jazz' %}selected{% endif %}>Jazz</option>
            <option value="classical" {% if mood == 'classical' %}selected{% endif %}>Classical</option>
            <option value="ambient" {% if mood == 'ambient' %}selected{% endif %}>Ambient</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="platform-filter">Filter by Platform:</label>
          <select id="platform-filter">
            <option value="all" {% if platform == 'all' %}selected{% endif %}>All Platforms</option>
            <option value="youtube" {% if platform == 'youtube' %}selected{% endif %}>YouTube</option>
            <option value="spotify" {% if platform == 'spotify' %}selected{% endif %}>Spotify</option>
          </select>
        </div>
      </div>

      <!-- Centered Grid of Playlists -->
      <div class="playlist-grid">
        {% for playlist in playlists %}
          <div class="playlist-card">
            <h3>{{ playlist.title }}</h3>
            <div class="meta">
              <span class="mood">{{ playlist.mood }}</span>
              <span>{{ playlist.platform }}</span>
            </div>
            <a href="{{ url_for('viberoom', playlist_id=playlist.id) }}" class="listen-now">Open in VibeRoom</a>
          </div>
        {% else %}
          <p>No playlists match your filters.</p>
        {% endfor %}
      </div>

      <!-- Contribute a Playlist – centered, padded, clean -->
      <div class="contribute-section">
        <h2>Contribute a Playlist</h2>
        <p>Know a great study playlist? Share it with the community!</p>

        <form class="contribute-form" method="post" action="#" onsubmit="event.preventDefault(); /* Wire up later */">
          <div class="form-group">
            <label for="contribute-mood">Mood</label>
            <select id="contribute-mood" required>
              <option value="" selected disabled>Select Mood</option>
              <option>Focus</option>
              <option>Chill</option>
              <option>Energized</option>
              <option>Upbeat</option>
              <option>Lo‑Fi</option>
              <option>Stress Relief</option>
              <option>Nature</option>
              <option>Jazz</option>
              <option>Classical</option>
              <option>Ambient</option>
            </select>
          </div>

          <div class="form-group">
            <label for="contribute-platform">Platform</label>
            <select id="contribute-platform" required>
              <option value="" selected disabled>Select Platform</option>
              <option>YouTube</option>
              <option>Spotify</option>
            </select>
          </div>

          <div class="form-group">
            <label for="playlist-title">Playlist Title</label>
            <input type="text" id="playlist-title" placeholder="e.g., Ultimate Focus Playlist" required />
          </div>

          <div class="form-group">
            <label for="playlist-url">Playlist URL</label>
            <input type="url" id="playlist-url" placeholder="Paste the link here" required />
          </div>

          <button type="submit" class="add-playlist-btn">Add Playlist</button>
        </form>
      </div>
    </main>

    {% include 'footer.html' %}
  </div>

  <script>
    // Keep the existing behavior: redirect on filter change
    document.getElementById("mood-filter").addEventListener("change", redirectToPlaylists);
    document.getElementById("platform-filter").addEventListener("change", redirectToPlaylists);

    function redirectToPlaylists() {
      const mood = document.getElementById("mood-filter").value;
      const platform = document.getElementById("platform-filter").value;
      const url = `/playlists?mood=${encodeURIComponent(mood)}&platform=${encodeURIComponent(platform)}`;
      window.location.href = url;
    }
  </script>
</body>
</html>


