import os
import requests


YOUTUBE_API_KEY = os.getenv("YOUTUBE_API_KEY")        #flie on the personal key
WEATHER_API_KEY = os.getenv("WEATHERSTACK_API_KEY")   #flie on the personal key


mood_links = {
    "Upbeat": "https://www.youtube.com/watch?v=ljnGl5nvUJY&list=RDljnGl5nvUJY&start_radio=1",
    "Lo-FI": "https://www.youtube.com/watch?v=sF80I-TQiW0",
    "stressed": "https://www.youtube.com/watch?v=_BtXPQimVhg",
    "Nature": "https://www.youtube.com/watch?v=9kzE8isXlQY&list=RD9kzE8isXlQY&start_radio=1",
    "Jazz mood": "https://www.youtube.com/watch?v=cd_YsXGYsbo",
    "Classical mood": https://www.youtube.com/watch?v=aXxrBKOSba4"
}

# use the same links to allow the Youtube API to work better....
weather_to_mood = {
    "sunny": "Upbeat",
    "rain": "Nature",
    "overcast": "Jazz mood",
    "cloudy": "Lo-FI",
    "mist": "stressed",
    "snow": "Classical mood"
}

# this was given by the weather api website to make code work!
def get_weather(city):
    url = f"http://api.weatherstack.com/current?access_key={WEATHER_API_KEY}&query={city}"
    r = requests.get(url)
    data = r.json()

    if "current" in data and "weather_descriptions" in data["current"]:
        return data["current"]["weather_descriptions"][0].lower()
    return None  # not sure if there is a easier way to do this (need to look this up before)

def get_link_by_mood(mood):
    mood = mood.lower().strip()
    link = mood_links.get(mood)

    if not link:
        return "Sorry, mood not found. Try another one?"
    return link

if __name__ == "__main__":
    print("Mood Music Room ")
    print("Type 'mood' to pick a vibe or 'weather' to let the sky pick your studying vibes ")

    mode = input("mood or weather? ").strip().lower()

    if mode == "weather":
        city = input("city?  ")
        w = get_weather(city)

        if w:
            print("weather in your city", city, ":", w)
            mood = weather_to_mood.get(w, "happy")
            print("feels like... mood =", mood)
            print("your vibe link ")
            print(get_link_by_mood(mood))
        else:
            print("ugh couldn't get weather lol")

    elif mode == "mood":
        print("Choose from ")
        for m in mood_links.keys():
            print(" ~", m)
        user_mood = input("what are you feeling rn? > ")
        print("here u go")
        print(get_link_by_mood(user_mood))

    else:
        print("Thatâ€™s not a choice. Please try again")


